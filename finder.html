<!DOCTYPE html>
<html lang="en">

<head>
  <!-- <link rel="stylesheet" href="styles.css"> -->
  <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">


  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="node_modules\jquery\dist\jquery.min.js"></script>
  <!-- <script src="jquery.mobile-1.4.5.js"></script> -->

</head>

<style>
  .qn1,
  .qn2,
  .qn3 {
    margin: 10px 0;
  }

  /* test push */

  .qn1 input[type="radio"],
  .qn2 input[type="radio"],
  .qn3 input[type="radio"] {
    opacity: 0;
    position: fixed;
    width: 0;
  }

  .qn1 label,
  .qn2 label,
  .qn3 label {
    display: inline-block;
    background-color: #fff;
    padding: 5px 10px;
    font-family: sans-serif, Arial;
    font-size: 16px;
    border: 1px solid #444;
    border-radius: 28px;
  }

  .qn1 label:hover,
  .qn2 label:hover,
  .qn3 label:hover {
    background-color: #06377B;
    border-color: none;
    color: white;
  }

  .qn1 input[type="radio"]:focus+label,
  .qn2 input[type="radio"]:focus+label,
  .qn3 input[type="radio"]:focus+label {
    border: 2px solid #06377B;
  }

  .qn1 input[type="radio"]:checked+label,
  .qn2 input[type="radio"]:checked+label,
  .qn3 input[type="radio"]:checked+label {
    background-color: #06377B;
    border-color: none;
    color: white;
  }

  .btnFindOutMore {
    padding: 15px;
    border-radius: 10px;
    background-color: #06377B;
  }

  /* 
  .btnFindOutMore:hover{
    background-color: #fff;
  } */

  /* .btn-primary:active{
    background-color: #000;
  } */
</style>

<body>
  <div class="container">
    <h4> Find the perfect loan for your business </h4>

    <!-- <div id="ck-button">
    <label>
      <input type="checkbox" value="red" name="checkbox"><span>red</span>
    </label>
    <label>
      <input type="checkbox" value="yellow" name="checkbox"><span>yellow</span>
    </label>
    <label>
      <input type="checkbox" value="orange" name="checkbox"><span>orange</span>
    </label>
  </div> -->

    <!-- First group of radio buttons -->
    <!-- What do you need the loan for? -->
    <h4>What do you need the loan for?</h4>

    <div class="qn1">
      <input type="radio" id="radio1_equipment" name="radioPurpose" value="equipment">
      <label for="radio1_equipment"> Equipment</label>

      <input type="radio" id="radio1_assistance" name="radioPurpose" value="assistance">
      <label for="radio1_assistance">Relief Assistance</label>

      <input type="radio" id="radio1_property" name="radioPurpose" value="property">
      <label for="radio1_property">Property</label>

      <input type="radio" id="radio1_vehicle" name="radioPurpose" value="vehicle">
      <label for="radio1_vehicle">Vehicle</label>

      <input type="radio" id="radio1_capital" name="radioPurpose" value="capital">
      <label for="radio1_capital">Working Capital</label>

      <input type="radio" id="radio1_trade" name="radioPurpose" value="trade">
      <label for="radio1_trade">Trade</label>
    </div>

    <!-- Second group of radio buttons -->
    <!-- How much do you need to loan? -->
    <h4>How much do you need to loan?</h4>

    <div class="qn2">
      <input type="radio" id="radio2_1" name="radioAmount" value="amount1">
      <label for="radio2_1"> &#60; $100,000</label>

      <input type="radio" id="radio2_2" name="radioAmount" value="amount2">
      <label for="radio2_2">$100,000 to $500,000</label>

      <input type="radio" id="radio2_3" name="radioAmount" value="amount3">
      <label for="radio2_3">$500,000 to $1,000,000</label>
    </div>

    <!-- Third group of radio buttons -->
    <!--How long is the loan term you are looking for? -->
    <h4>How long is the loan term you are looking for?</h4>
    <div class="qn3">
      <input type="radio" id="radio3_1" name="radioTerm" value="term1">
      <label for="radio3_1"> &#60; 1 year</label>

      <input type="radio" id="radio3_2" name="radioTerm" value="term2">
      <label for="radio3_2">1 to 5 years</label>

      <input type="radio" id="radio3_3" name="radioTerm" value="term3">
      <label for="radio3_3">More than 5 years</label>
    </div>
    <hr>
    <!-- <button onclick="testFunction()" type="button" class="btn btn-primary">Get Results</button> -->
    <!-- result section  -->
    <h4 id="loan"></h4>
    <p id="description"></p>
    <div id="divFindOutMore"></div>

    <!-- Division for suggested loans -->
    <div id="otherLoans">
      <div class="row">
        <!-- <div class="card col">
          <div class="card-body">
            <h4 class="card-title">Card title</h4>
            <p class="card-text">
              Some quick example text to build on the card title
              and make up the bulk of the card's content.
            </p>
            <a href="#!" class="card-link">Learn More</a>
          </div>
        </div> -->

        <!-- <div class="card col" >
          <div class="card-body">
            <h4 class="card-title">Card title</h4>
            <p class="card-text">
              Some quick example text to build on the card title
              and make up the bulk of the card's content.
            </p>
            <a href="#!" class="card-link">Learn More</a>
          </div>
        </div>

        <div class="card col" >
          <div class="card-body">
            <h4 class="card-title">Card title</h4>
            <p class="card-text">
              Some quick example text to build on the card title
              and make up the bulk of the card's content.
            </p>
            <a href="#!" class="card-link">Learn More</a>
          </div>
        </div>

        <div class="card col" >
          <div class="card-body">
            <h4 class="card-title">Card title</h4>
            <p class="card-text">
              Some quick example text to build on the card title
              and make up the bulk of the card's content.
            </p>
            <a href="#!" class="card-link">Learn More</a>
          </div>
        </div> -->

      </div>
    </div>
  </div>
</body>

<script>
  // array to store information of loan (id, name, description, link)
  var loan = [
    { loanID: 0, name: "Equipment Vehicle Loan", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis turpis augue, blandit sed interdum in, laoreet eu ipsum. Fusce venenatis consectetur tempus. Sed nec pellentesque quam, non finibus augue. Cras sollicitudin justo in neque consequat, non fringilla augue semper. Proin viverra ut ipsum sed maximus. Aliquam lacinia ante sed nisl commodo facilisis. Sed consequat, nisl sed scelerisque ultrices, nibh sapien viverra sem, eget facilisis ipsum nulla vel urna. Aliquam in posuere magna. Pellentesque tincidunt id arcu sit amet consequat. Suspendisse imperdiet varius malesuada.", url: "https://www.google.com/" },
    { loanID: 1, name: "SME Equipment Loan", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis turpis augue, blandit sed interdum in, laoreet eu ipsum. Fusce venenatis consectetur tempus. Sed nec pellentesque quam, non finibus augue. Cras sollicitudin justo in neque consequat, non fringilla augue semper. Proin viverra ut ipsum sed maximus. Aliquam lacinia ante sed nisl commodo facilisis. Sed consequat, nisl sed scelerisque ultrices, nibh sapien viverra sem, eget facilisis ipsum nulla vel urna. Aliquam in posuere magna. Pellentesque tincidunt id arcu sit amet consequat. Suspendisse imperdiet varius malesuada.", url: "" },
    { loanID: 2, name: "Temporary Bridging Loan", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis turpis augue, blandit sed interdum in, laoreet eu ipsum. Fusce venenatis consectetur tempus. Sed nec pellentesque quam, non finibus augue. Cras sollicitudin justo in neque consequat, non fringilla augue semper. Proin viverra ut ipsum sed maximus. Aliquam lacinia ante sed nisl commodo facilisis. Sed consequat, nisl sed scelerisque ultrices, nibh sapien viverra sem, eget facilisis ipsum nulla vel urna. Aliquam in posuere magna. Pellentesque tincidunt id arcu sit amet consequat. Suspendisse imperdiet varius malesuada.", url: "" },
    { loanID: 3, name: "Business Property Loan", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis turpis augue, blandit sed interdum in, laoreet eu ipsum. Fusce venenatis consectetur tempus. Sed nec pellentesque quam, non finibus augue. Cras sollicitudin justo in neque consequat, non fringilla augue semper. Proin viverra ut ipsum sed maximus. Aliquam lacinia ante sed nisl commodo facilisis. Sed consequat, nisl sed scelerisque ultrices, nibh sapien viverra sem, eget facilisis ipsum nulla vel urna. Aliquam in posuere magna. Pellentesque tincidunt id arcu sit amet consequat. Suspendisse imperdiet varius malesuada.", url: "" },
    { loanID: 4, name: "Loan Insurance Scheme", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis turpis augue, blandit sed interdum in, laoreet eu ipsum. Fusce venenatis consectetur tempus. Sed nec pellentesque quam, non finibus augue. Cras sollicitudin justo in neque consequat, non fringilla augue semper. Proin viverra ut ipsum sed maximus. Aliquam lacinia ante sed nisl commodo facilisis. Sed consequat, nisl sed scelerisque ultrices, nibh sapien viverra sem, eget facilisis ipsum nulla vel urna. Aliquam in posuere magna. Pellentesque tincidunt id arcu sit amet consequat. Suspendisse imperdiet varius malesuada.", url: "" },
    { loanID: 5, name: "Bizmoney Loan", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis turpis augue, blandit sed interdum in, laoreet eu ipsum. Fusce venenatis consectetur tempus. Sed nec pellentesque quam, non finibus augue. Cras sollicitudin justo in neque consequat, non fringilla augue semper. Proin viverra ut ipsum sed maximus. Aliquam lacinia ante sed nisl commodo facilisis. Sed consequat, nisl sed scelerisque ultrices, nibh sapien viverra sem, eget facilisis ipsum nulla vel urna. Aliquam in posuere magna. Pellentesque tincidunt id arcu sit amet consequat. Suspendisse imperdiet varius malesuada.", url: "" },
    { loanID: 6, name: "SME Enhanced Working Capital Loan", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis turpis augue, blandit sed interdum in, laoreet eu ipsum. Fusce venenatis consectetur tempus. Sed nec pellentesque quam, non finibus augue. Cras sollicitudin justo in neque consequat, non fringilla augue semper. Proin viverra ut ipsum sed maximus. Aliquam lacinia ante sed nisl commodo facilisis. Sed consequat, nisl sed scelerisque ultrices, nibh sapien viverra sem, eget facilisis ipsum nulla vel urna. Aliquam in posuere magna. Pellentesque tincidunt id arcu sit amet consequat. Suspendisse imperdiet varius malesuada.", url: "" }
  ]

  $("input[name='radioPurpose'],input[name='radioAmount'],input[name='radioTerm']").click(function () {
    var radioPurpose = document.getElementsByName('radioPurpose');
    var radioAmount = document.getElementsByName('radioAmount');
    var radioTerm = document.getElementsByName('radioTerm');

    // var checks = document.getElementsByName('checkbox');
    var qn1 = ""
    var qn2 = ""
    var qn3 = ""

    for (var i = 0, length = radioPurpose.length; i < length; i++) {
      if (radioPurpose[i].checked) {
        qn1 = radioPurpose[i].value
        break;
      }

    }
    for (var i = 0, length = radioAmount.length; i < length; i++) {
      if (radioAmount[i].checked) {
        qn2 = radioAmount[i].value
        break;
      }

    }
    for (var i = 0, length = radioTerm.length; i < length; i++) {
      if (radioTerm[i].checked) {
        qn3 = radioTerm[i].value
        break;
      }
    }
    // ensure that none of the values is empty
    if (qn1 != "" && qn2 != "" && qn3 != "") {
      console.log(loan)
      formulaFunction(qn1, qn2, qn3);
      // console.log(formulaFunction(qn1, qn2, qn3));
      console.log("lolo");
      shuffleArray(loan, formulaFunction(qn1, qn2, qn3))

    }
  });



  // function to deduce the best loan for user
  function formulaFunction(a, b, c) {

    // console.log(a, b, c)

    // var teststring = ""
    // for (var i = 0; i < a.length; i++) {
    //   teststring += a[i].value + " "
    // }
    // (c == "term1" || c == "term2")
    // Equipment Vehicle Loan
    if ((a == "equipment" && c != "term3") || a == "vehicle") {
      document.getElementById("loan").innerHTML = loan[0].name;
      document.getElementById("description").innerHTML = loan[0].description;
      document.getElementById("divFindOutMore").innerHTML = '<a class="btn btn-primary btn-block btnFindOutMore" href="' + loan[0].url + '" role="button">Click to Find Out More</a>';
      return 0;
    }
    // SME Equipment Loan
    else if (a == "equipment" && c == "term3") {
      document.getElementById("loan").innerHTML = loan[1].name;
      document.getElementById("description").innerHTML = loan[1].description;
      document.getElementById("divFindOutMore").innerHTML = '<a class="btn btn-primary btn-block btnFindOutMore" href="' + loan[1].url + '" role="button">Click to Find Out More</a>';
      return 1;
    }
    // Temporary Bridging Loan
    else if (a == "assistance") {
      document.getElementById("loan").innerHTML = loan[2].name;
      document.getElementById("description").innerHTML = loan[2].description;
      document.getElementById("divFindOutMore").innerHTML = '<a class="btn btn-primary btn-block btnFindOutMore" href="' + loan[2].url + '" role="button">Click to Find Out More</a>';
      return 2;

    }
    // Business Property Loan 
    else if (a == "property") {
      document.getElementById("loan").innerHTML = loan[3].name;
      document.getElementById("description").innerHTML = loan[3].description;
      document.getElementById("divFindOutMore").innerHTML = '<a class="btn btn-primary btn-block btnFindOutMore" href="' + loan[3].url + '" role="button">Click to Find Out More</a>';
      return 3;

    }
    // Loan Insurance scheme
    else if (a == "trade" && c == "term1") {
      document.getElementById("loan").innerHTML = loan[4].name;
      document.getElementById("description").innerHTML = loan[4].description;
      document.getElementById("divFindOutMore").innerHTML = '<a class="btn btn-primary btn-block btnFindOutMore" href="' + loan[4].url + '" role="button">Click to Find Out More</a>';
      return 4;

    }
    // Bizmoney Loan
    else if ((a == "trade" && c != "term1") || (a == "capital" && b != "amount3")) {
      document.getElementById("loan").innerHTML = loan[5].name;
      document.getElementById("description").innerHTML = loan[5].description;
      document.getElementById("divFindOutMore").innerHTML = '<a class="btn btn-primary btn-block btnFindOutMore" href="' + loan[5].url + '" role="button">Click to Find Out More</a>';
      return 5;

    }
    //SME Enhanced Working Capital Loan
    else if (a == "capital" && b == "amount3") {
      document.getElementById("loan").innerHTML = loan[6].name;
      document.getElementById("description").innerHTML = loan[6].description;
      document.getElementById("divFindOutMore").innerHTML = '<a class="btn btn-primary btn-block btnFindOutMore" href="' + loan[6].url + '" role="button">Click to Find Out More</a>';
      return 6;

    }

  }


  //function to shuffle new array to provide suggested loans
  function shuffleArray(array, index) {
    var tempArray = array.slice(0)
    tempArray.splice(index, 1)
    console.log(tempArray)

    var suggestedLoans = "";

    for (var i = tempArray.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      [tempArray[i], tempArray[j]] = [tempArray[j], tempArray[i]];
    }

    console.log(tempArray)
    // console.log("after shuffle")
    // console.log(tempArray)
    for (var i = 0; i < 4; i++){
      suggestedLoans = suggestedLoans +  '<div class="card col"> <div class="card-body"><h4 class="card-title">'+tempArray[i].name+'</h4><p class="card-text">'+tempArray[i].description+'</p><a href="'+tempArray[i].url+'" class="card-link">Learn More</a></div></div>'
    }

    // $.each(array, function (index, element) {
    //   posts = posts + "<div>" + "<h3>" + array[index].fname + " " + array[index].lname + "</h3><img src=" + array[index].picture + "><p>" + array[index].postText + "</p></div>";

    // })

    document.getElementById("otherLoans").innerHTML = suggestedLoans;

  }
</script>

</html>